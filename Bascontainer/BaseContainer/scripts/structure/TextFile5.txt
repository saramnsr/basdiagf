CREATE TABLE BAS_CONTROLSFINANCE (
    ID INTEGER NOT NULL,
    ETAT SMALLINT,
    REMARQUE BLOB SUB_TYPE 1 SEGMENT SIZE 80,
    CODECONTROL VARCHAR(10),
    LIBELLE VARCHAR(150),
    ID_CONTROLEUR INTEGER,
    "DATE" TIMESTAMP);

alter table BAS_CONTROLSFINANCE
add constraint PK_BAS_CONTROLSFINANCE
primary key (ID);


CREATE TABLE BAS_LNK_PAIEMENT_CTRL (
    ID_PAIEMENT INTEGER NOT NULL,
    ID_CONTROL INTEGER NOT NULL,
    CODE_ERREUR VARCHAR(10),
    ETAT SMALLINT,
    REMARQUE BLOB SUB_TYPE 1 SEGMENT SIZE 80,
    UDATEDATE TIMESTAMP);

ALTER TABLE BAS_LNK_PAIEMENT_CTRL
ADD LATEST_FLAG CHAR(1);


ALTER TABLE BANQUE
ADD TITULAIRE VARCHAR(100);

ALTER TABLE BANQUE
ADD NUMCLE_BAN CHAR(2);


CREATE TABLE BAS_BORDEREAU_FINANCE (
    ID             INTEGER NOT NULL,
    NUM_BORDEREAU  CHAR(20) NOT NULL,
    COD_BAN        CHAR(10) NOT NULL,
    NB_CHEQUE      INTEGER NOT NULL,
    ID_CONTROL     INTEGER NOT NULL,
    MONTANT_TOTAL  DOUBLE PRECISION NOT NULL
);


ALTER TABLE BAS_BORDEREAU_FINANCE
ADD DATEREMISE TIMESTAMP;


ALTER TABLE BAS_BORDEREAU_FINANCE ADD CONSTRAINT PK_BAS_BORDEREAU_FINANCE PRIMARY KEY (ID);


CREATE TABLE BAS_LNK_BORDEREAU_PAIEMENT (
    ID_PAIEMENT   INTEGER NOT NULL,
    ID_BORDEREAU  INTEGER NOT NULL
);

ALTER TABLE BAS_LNK_BORDEREAU_PAIEMENT ADD CONSTRAINT PK_BAS_LNK_BORDEREAU_PAIEMENT PRIMARY KEY (ID_PAIEMENT, ID_BORDEREAU);


CREATE TABLE BASE_LNKENTITYBQUE (
    ID_ENTITY  INTEGER NOT NULL,
    COD_BAN    CHAR(10) NOT NULL
);

CREATE TABLE BAS_MVT_CAISSE (
    DATE_MVT TIMESTAMP,
    MONTANT DOUBLE PRECISION,
    ID_UTILISATEUR INTEGER);


ALTER TABLE BAS_BORDEREAU_FINANCE
   ADD DATEDEVALIDATION TIMESTAMP;

   
   ALTER TABLE BAS_MVT_CAISSE
ADD POSTE VARCHAR(30);

	
INSERT INTO BASE_LNKENTITYBQUE (ID_ENTITY, COD_BAN) VALUES (1, 'B3        ');
INSERT INTO BASE_LNKENTITYBQUE (ID_ENTITY, COD_BAN) VALUES (2, 'B2        ');
INSERT INTO BASE_LNKENTITYBQUE (ID_ENTITY, COD_BAN) VALUES (3, 'B5        ');
INSERT INTO BASE_LNKENTITYBQUE (ID_ENTITY, COD_BAN) VALUES (4, 'B4        ');
INSERT INTO BASE_LNKENTITYBQUE (ID_ENTITY, COD_BAN) VALUES (1, 'B1        ');




SET TERM ^ ;

CREATE trigger bas_lnk_paiement_ctrl_bi0 for bas_lnk_paiement_ctrl
active before insert position 0
AS
begin
  update BAS_LNK_PAIEMENT_CTRL set LATEST_FLAG='N' where  ID_PAIEMENT = new.id_paiement;
end
^

SET TERM ; ^


ALTER TABLE BASE_PAIEMENTREEL
ADD ESPECESRECU DOUBLE PRECISION;

ALTER TABLE BASE_PAIEMENTREEL
ADD ESPECESRENDUS DOUBLE PRECISION;

ALTER TABLE BASE_PAIEMENTREEL
ADD ESPECESMISENCAISSE DOUBLE PRECISION;


ALTER TABLE BAS_BORDEREAU_FINANCE
ADD NB_BILLETS5 SMALLINT;

ALTER TABLE BAS_BORDEREAU_FINANCE
ADD NB_BILLETS10 SMALLINT;


ALTER TABLE BAS_BORDEREAU_FINANCE
ADD NB_BILLETS20 SMALLINT;


ALTER TABLE BAS_BORDEREAU_FINANCE
ADD NB_BILLETS50 SMALLINT;


ALTER TABLE BAS_BORDEREAU_FINANCE
ADD NB_BILLETS100 SMALLINT;


ALTER TABLE BAS_BORDEREAU_FINANCE
ADD NB_BILLETS200 SMALLINT;


ALTER TABLE BAS_BORDEREAU_FINANCE
ADD NB_BILLETS500 SMALLINT;
